<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Online Shopping â€” Delivery Dashboard</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#app{height:100%}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:#f7fafc;color:#0f172a}

    .app{display:grid;grid-template-columns:260px 1fr;grid-template-rows:64px 1fr;gap:18px;padding:18px;height:100vh}
    .sidebar{grid-row:1/span 2;background:#111827;color:#fff;border-radius:12px;padding:18px;display:flex;flex-direction:column}
    .logo{font-weight:800;font-size:18px}
    .nav{margin-top:18px;display:flex;flex-direction:column;gap:8px}
    .nav a{padding:10px;border-radius:8px;color:#cbd5e1;text-decoration:none}
    .nav a:hover,.nav a.active{background:#0ea5a4;color:#fff}

    .topbar{grid-column:2;grid-row:1;display:flex;align-items:center;justify-content:space-between}
    .search input{padding:10px 12px;border-radius:10px;border:1px solid #e6eef6;min-width:300px}
    .profile{display:flex;gap:12px;align-items:center}
    .avatar{width:44px;height:44px;border-radius:999px;background:#e2e8f0;display:flex;align-items:center;justify-content:center}

    .content{grid-column:2;grid-row:2;display:flex;flex-direction:column;gap:16px}
    .cards{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .card{background:white;padding:14px;border-radius:10px;box-shadow:0 8px 20px rgba(2,6,23,0.06)}
    .card h4{font-size:13px;color:#64748b;margin-bottom:6px}
    .card p{font-size:20px;font-weight:700}

    .panels{display:grid;grid-template-columns:2fr 1fr;gap:12px}
    .panel{background:white;padding:14px;border-radius:10px;box-shadow:0 8px 20px rgba(2,6,23,0.06)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;text-align:left;border-bottom:1px solid #eef2f7}
    th{font-weight:700;color:#374151}
    .muted{color:#6b7280}
    .small{font-size:13px}
    .btn{padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #e6eef6}
    .btn.primary{background:#0ea5a4;color:white}

    .badge{padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px}
    .badge.pending{background:#fff7ed;color:#92400e}
    .badge.dispatched{background:#fff1f2;color:#9f1239}
    .badge.intransit{background:#eef2ff;color:#1e40af}
    .badge.delivered{background:#ecfdf5;color:#065f46}

    .couriers{display:flex;flex-direction:column;gap:8px}
    .courier{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;border:1px solid #eef2f6}

    .table-wrap{overflow:auto;max-height:420px}

    @media (max-width:980px){
      .app{grid-template-columns:1fr;grid-template-rows:64px auto 1fr}
      .sidebar{grid-row:2}
      .topbar{grid-column:1}
      .content{grid-column:1}
      .cards{grid-template-columns:repeat(2,1fr)}
      .panels{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div id="app" class="app">
    <aside class="sidebar">
      <div class="logo">ðŸ›’ ShopShip Dashboard</div>
      <nav class="nav">
        <a class="active" href="#">Overview</a>
        <a href="#">Orders</a>
        <a href="#">Shipments</a>
        <a href="#">Couriers</a>
        <a href="#">Inventory</a>
        <a href="#">Settings</a>
      </nav>
      <div style="margin-top:auto;font-size:13px;color:#cbd5e1">Demo Â· Local only</div>
    </aside>

    <header class="topbar">
      <div class="search">
        <input id="globalSearch" placeholder="Search order ID, product, customer, address..." />
      </div>
      <div class="profile">
        <div class="small muted">Admin</div>
        <div class="avatar">AS</div>
      </div>
    </header>

    <main class="content">
      <section class="cards">
        <div class="card"><h4>Orders (24h)</h4><p id="statOrders">â€”</p><div class="small muted">Recent</div></div>
        <div class="card"><h4>Revenue</h4><p id="statRevenue">â€”</p><div class="small muted">Today</div></div>
        <div class="card"><h4>Shipments In Transit</h4><p id="statInTransit">â€”</p><div class="small muted">Active</div></div>
        <div class="card"><h4>Available Couriers</h4><p id="statCouriers">â€”</p><div class="small muted">Ready</div></div>
      </section>

      <section class="panels">
        <div class="panel">
          <h3>Recent Orders</h3>
          <div style="display:flex;gap:8px;margin:12px 0;align-items:center">
            <select id="filterStatus" class="small">
              <option value="all">All</option>
              <option value="pending">Pending</option>
              <option value="dispatched">Dispatched</option>
              <option value="intransit">In Transit</option>
              <option value="delivered">Delivered</option>
            </select>
            <button id="exportCsv" class="btn ghost small">Export CSV</button>
            <div style="margin-left:auto" class="muted small">Updated: <span id="lastUpdated">â€”</span></div>
          </div>

          <div class="table-wrap">
            <table id="ordersTable">
              <thead>
                <tr><th>Order</th><th>Customer</th><th>Items</th><th>Amount</th><th>Status</th><th>Courier</th><th>Actions</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="panel">
          <h3>Couriers</h3>
          <div id="couriersList" class="couriers"></div>
          <div style="height:12px"></div>
          <h4 class="small muted">Inventory alerts</h4>
          <ul id="inventoryAlerts" class="small muted"></ul>
        </div>
      </section>
    </main>
  </div>

  <div id="modalRoot" style="display:none"></div>

  <script>
    // Sample data
    const sampleCouriers = [
      {id:'c1', name:'Vikram', vehicle:'Bike', status:'available'},
      {id:'c2', name:'Neha', vehicle:'Van', status:'on-delivery'},
      {id:'c3', name:'Sunil', vehicle:'Bike', status:'available'},
    ];

    const sampleOrders = [
      {id:2001, customer:'Rohit Sharma', items:['Wireless Mouse','USB Cable'], amount:1299, status:'pending', courierId:null, placedAt:'2025-09-10 08:20'},
      {id:2002, customer:'Kavita Patel', items:['Running Shoes'], amount:3499, status:'dispatched', courierId:'c2', placedAt:'2025-09-10 07:50'},
      {id:2003, customer:'Anmol', items:['Sunglasses'], amount:799, status:'intransit', courierId:'c2', placedAt:'2025-09-09 22:10'},
      {id:2004, customer:'Leena', items:['T-shirt','Cap'], amount:1199, status:'delivered', courierId:'c1', placedAt:'2025-09-09 15:40'},
      {id:2005, customer:'Aakash', items:['Bluetooth Speaker'], amount:2199, status:'pending', courierId:null, placedAt:'2025-09-10 09:05'},
    ];

    const sampleInventory = [
      {sku:'SKU-101', name:'Wireless Mouse', qty:3},
      {sku:'SKU-102', name:'Running Shoes', qty:12},
      {sku:'SKU-103', name:'Bluetooth Speaker', qty:1},
    ];

    // State
    let ORDERS = JSON.parse(localStorage.getItem('shop_orders')) || sampleOrders.slice();
    let COURIERS = JSON.parse(localStorage.getItem('shop_couriers')) || sampleCouriers.slice();
    let INVENTORY = JSON.parse(localStorage.getItem('shop_inventory')) || sampleInventory.slice();

    // Helpers
    const byId = id => document.getElementById(id);
    function formatCurrency(n){return 'â‚¹' + n.toFixed(0)}
    function nowISO(){return new Date().toLocaleString()}

    // Render stats
    function renderStats(){
      byId('statOrders').innerText = ORDERS.length;
      byId('statRevenue').innerText = formatCurrency(ORDERS.reduce((s,o)=>s+o.amount,0));
      byId('statInTransit').innerText = ORDERS.filter(o=>o.status==='intransit').length;
      byId('statCouriers').innerText = COURIERS.filter(c=>c.status==='available').length;
      byId('lastUpdated').innerText = nowISO();
    }

    function renderOrders(filter='all', search=''){
      const tbody = document.querySelector('#ordersTable tbody'); tbody.innerHTML='';
      const rows = ORDERS.filter(o=> filter==='all' ? true : o.status===filter)
                         .filter(o=>{ if(!search) return true; const s=search.toLowerCase(); return (''+o.id).includes(s) || o.customer.toLowerCase().includes(s) || o.items.join(' ').toLowerCase().includes(s); });
      rows.forEach(o=>{
        const tr = document.createElement('tr');
        const courier = COURIERS.find(c=>c.id===o.courierId);
        tr.innerHTML = `
          <td>#${o.id}</td>
          <td>${o.customer}</td>
          <td class="small muted">${o.items.join(', ')}</td>
          <td>${formatCurrency(o.amount)}</td>
          <td>${statusHtml(o.status)}</td>
          <td>${courier ? courier.name : '<span class="muted small">â€”</span>'}</td>
          <td>
            <button class="btn ghost small" data-action="view" data-id="${o.id}">View</button>
            <button class="btn primary small" data-action="assign" data-id="${o.id}">${o.courierId? 'Reassign' : 'Assign'}</button>
          </td>`;
        tbody.appendChild(tr);
      });
    }

    function statusHtml(s){
      if(s==='pending') return '<span class="badge pending">Pending</span>';
      if(s==='dispatched') return '<span class="badge dispatched">Dispatched</span>';
      if(s==='intransit') return '<span class="badge intransit">In Transit</span>';
      if(s==='delivered') return '<span class="badge delivered">Delivered</span>';
      return s;
    }

    function renderCouriers(){
      const wrap = byId('couriersList'); wrap.innerHTML='';
      COURIERS.forEach(c=>{
        const el = document.createElement('div'); el.className='courier';
        el.innerHTML = `<div style="width:44px;height:44px;border-radius:999px;background:#eef2ff;display:flex;align-items:center;justify-content:center;font-weight:700">${c.name.split(' ').map(x=>x[0]).slice(0,2).join('')}</div>
                        <div style="flex:1">
                          <div style="font-weight:700">${c.name}</div>
                          <div class="small muted">${c.vehicle} Â· ${c.status}</div>
                        </div>
                        <div><button class="btn ghost small" data-courier="${c.id}">Toggle</button></div>`;
        wrap.appendChild(el);
      });
    }

    function renderInventoryAlerts(){
      const ul = byId('inventoryAlerts'); ul.innerHTML='';
      INVENTORY.filter(i=>i.qty<=3).forEach(i=>{
        const li = document.createElement('li'); li.innerText = `${i.name} (${i.sku}) â€” low stock: ${i.qty}`; ul.appendChild(li);
      });
    }

    // Modal
    function openModal(html){ const root = byId('modalRoot'); root.style.display='block'; root.innerHTML = `<div class="modal-backdrop" style="position:fixed;inset:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center" onclick="closeModal(event)"><div style="background:white;border-radius:12px;padding:16px;width:92%;max-width:720px" onclick="event.stopPropagation()">${html}</div></div>` }
    function closeModal(){ const root=byId('modalRoot'); root.style.display='none'; root.innerHTML=''; }

    function showOrderDetails(id){
      const o = ORDERS.find(x=>x.id==id); if(!o) return alert('Order missing');
      const courierOptions = COURIERS.map(c=>`<option value="${c.id}" ${c.id===o.courierId? 'selected':''}>${c.name} â€” ${c.status}</option>`).join('');
      openModal(`
        <h3>Order #${o.id}</h3>
        <div style="display:flex;gap:14px;margin-top:10px">
          <div style="flex:1">
            <div><strong>Customer:</strong> ${o.customer}</div>
            <div><strong>Items:</strong> ${o.items.join(', ')}</div>
            <div><strong>Amount:</strong> ${formatCurrency(o.amount)}</div>
            <div style="margin-top:8px"><strong>Status:</strong> ${statusHtml(o.status)}</div>
          </div>
          <div style="width:240px">
            <label class="small muted">Assign courier</label>
            <select id="modalCourierSelect" style="width:100%;padding:8px;border-radius:8px;margin-top:6px">${courierOptions}</select>
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
              <button class="btn ghost" onclick="closeModal()">Cancel</button>
              <button class="btn primary" onclick="assignCourier(${o.id})">Assign</button>
            </div>
          </div>
        </div>
      `);
    }

    function assignCourier(orderId){
      const sel = byId('modalCourierSelect'); const courierId = sel.value || null;
      const idx = ORDERS.findIndex(o=>o.id==orderId); if(idx===-1) return;
      ORDERS[idx].courierId = courierId; if(courierId) ORDERS[idx].status = 'intransit';
      persist(); closeModal(); renderAll();
    }

    function toggleCourier(id){ const i = COURIERS.findIndex(c=>c.id===id); if(i===-1) return; COURIERS[i].status = COURIERS[i].status==='available' ? 'on-delivery' : 'available'; persist(); renderAll(); }

    // Export CSV
    function exportCSV(){
      const header = ['Order ID','Customer','Items','Amount','Status','Courier','Placed At'];
      const rows = ORDERS.map(o=>[o.id, o.customer, `"${o.items.join('; ')}"`, o.amount, o.status, (COURIERS.find(c=>c.id===o.courierId)||{}).name||'', o.placedAt]);
      const csv = [header.join(','), ...rows.map(r=>r.join(','))].join('\n');
      const blob = new Blob([csv], {type:'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='shop_orders.csv'; a.click(); URL.revokeObjectURL(url);
    }

    // Persistence
    function persist(){ localStorage.setItem('shop_orders', JSON.stringify(ORDERS)); localStorage.setItem('shop_couriers', JSON.stringify(COURIERS)); localStorage.setItem('shop_inventory', JSON.stringify(INVENTORY)); }

    function renderAll(){ renderStats(); renderOrders(byId('filterStatus').value, byId('globalSearch').value.trim()); renderCouriers(); renderInventoryAlerts(); }

    // Events
    document.addEventListener('click', (e)=>{
      const view = e.target.closest('[data-action="view"]'); const assign = e.target.closest('[data-action="assign"]'); const courierBtn = e.target.closest('[data-courier]');
      if(view) showOrderDetails(view.dataset.id);
      if(assign) showOrderDetails(assign.dataset.id);
      if(courierBtn) toggleCourier(courierBtn.dataset.courier);
    });
    byId('filterStatus').addEventListener('change', ()=>renderAll());
    byId('globalSearch').addEventListener('input', ()=>renderAll());
    byId('exportCsv').addEventListener('click', exportCSV);

    // init
    renderAll();
    // developer helper: window.resetShopDemo() to clear storage
    window.resetShopDemo = function(){ localStorage.removeItem('shop_orders'); localStorage.removeItem('shop_couriers'); localStorage.removeItem('shop_inventory'); location.reload(); }
  </script>
</body>
</html>
