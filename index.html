<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Delivery Shops — Dashboard</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#06b6d4; --glass:rgba(255,255,255,0.03);
      --radius:12px; --gap:14px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body,#app{height:100%;}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#071127);color:#e6eef6}
    .wrap{display:grid;grid-template-columns:280px 1fr;gap:var(--gap);height:100vh;padding:18px}

    /* Sidebar */
    .sidebar{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border-radius:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6);overflow:auto}
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:14px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:18px;margin:0}
    .search{margin:12px 0}
    .search input{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    .shops{margin-top:12px}
    .shop{padding:10px;border-radius:10px;cursor:pointer;display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .shop:hover{background:var(--glass)}
    .shop.active{background:rgba(6,182,212,0.12);box-shadow:inset 0 0 0 1px rgba(6,182,212,0.06)}
    .shop img{width:36px;height:36px;border-radius:8px;object-fit:cover}
    .muted{color:var(--muted);font-size:13px}

    /* Main */
    .main{display:flex;flex-direction:column;gap:12px}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--card);border-radius:12px}
    .controls{display:flex;gap:8px;align-items:center}
    .controls select,.controls button{padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:10px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:12px;cursor:pointer;display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .card .title{font-weight:600}
    .meta{display:flex;justify-content:space-between;align-items:center}

    /* Details panel */
    .details{position:fixed;right:18px;top:18px;width:420px;max-width:92%;height:calc(100vh - 36px);background:linear-gradient(180deg,#071327,rgba(7,18,39,0.6));backdrop-filter:blur(8px);border-radius:14px;padding:16px;box-shadow:0 10px 40px rgba(2,6,23,0.7);overflow:auto;transform:translateX(20px);transition:transform .22s ease,opacity .22s ease;opacity:0;pointer-events:none}
    .details.open{transform:translateX(0);opacity:1;pointer-events:auto}
    .details .head{display:flex;align-items:center;gap:12px}
    .details img{width:120px;height:88px;object-fit:cover;border-radius:8px}
    .badge{padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.03);font-size:13px}

    /* Responsive */
    @media (max-width:880px){.wrap{grid-template-columns:1fr;padding:12px}.sidebar{order:2;height:40vh}.details{width:100%;left:0;right:0;bottom:0;top:auto;height:55vh;border-radius:14px 14px 0 0}}

    /* small helpers */
    .muted-small{color:var(--muted);font-size:12px}
    .btn{padding:8px 10px;border-radius:10px;border:none;background:var(--accent);color:#032;
      cursor:pointer;font-weight:600}
    .pill{padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:13px}
  </style>
</head>
<body>
  <div id="app" class="wrap">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">DS</div>
        <div>
          <h1>Delivery Shops</h1>
          <div class="muted">Manage collections • browse products</div>
        </div>
      </div>

      <div class="search">
        <input id="searchInput" placeholder="Search products or shops..." />
      </div>

      <div class="shops">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
          <div class="muted">Shops</div>
          <div class="muted-small" id="shopCount">0</div>
        </div>
        <div id="shopsList"></div>
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div style="display:flex;gap:10px;align-items:center">
          <div class="muted">Showing</div>
          <div id="resultCount" class="pill">0 products</div>
        </div>
        <div class="controls">
          <select id="sortSelect"><option value="newest">Newest</option><option value="priceAsc">Price ↑</option><option value="priceDesc">Price ↓</option></select>
          <button id="clearFilters" class="muted-small">Clear</button>
        </div>
      </div>

      <div class="grid" id="productGrid"></div>

      <div style="margin-top:12px;color:var(--muted);font-size:13px">Tip: click any product to open the details panel. Use search to filter across shops & products.</div>
    </main>

    <section id="detailsPanel" class="details" aria-hidden="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div class="muted">Product details</div>
        <button id="closeDetails" class="muted-small">Close</button>
      </div>
      <div id="detailsContent"></div>
    </section>
  </div>

  <script>
    // Sample data: shops and products
    const data = {
      shops: [
        {id: 's1', name: 'GreenBite Foods', logo: '', city: 'Mumbai'},
        {id: 's2', name: 'QuickCrate Delivery', logo: '', city: 'Bengaluru'},
        {id: 's3', name: 'Urban Snacks', logo: '', city: 'Delhi'}
      ],
      products: [
        {id:'p1',shopId:'s1',title:'Farmhouse Sandwich',desc:'Fresh veg sandwich with lettuce, tomato & cheese',price:199,delivery:25,eta:'30-40 mins',img:'https://images.unsplash.com/photo-1551218808-94e220e084d2?auto=format&fit=crop&w=900&q=60',tags:['veg','sandwich'],createdAt:'2025-08-07'},
        {id:'p2',shopId:'s1',title:'Protein Salad Bowl',desc:'Quinoa, chickpeas, avocado & seasonal greens',price:349,delivery:40,eta:'25-35 mins',img:'https://images.unsplash.com/photo-1542444459-db6f0b1a19f0?auto=format&fit=crop&w=900&q=60',tags:['salad','healthy'],createdAt:'2025-09-02'},
        {id:'p3',shopId:'s2',title:'Classic Cheese Pizza',desc:'12" cheese pizza with house tomato sauce',price:499,delivery:60,eta:'40-55 mins',img:'https://images.unsplash.com/photo-1548365328-6d9b5e3f94a6?auto=format&fit=crop&w=900&q=60',tags:['pizza'],createdAt:'2025-06-15'},
        {id:'p4',shopId:'s3',title:'Spicy Paneer Wrap',desc:'Tandoori paneer, onions, mint chutney wrapped in roti',price:179,delivery:30,eta:'20-30 mins',img:'https://images.unsplash.com/photo-1604908177522-6a4bd97d4b2f?auto=format&fit=crop&w=900&q=60',tags:['veg','wrap'],createdAt:'2025-09-10'},
        {id:'p5',shopId:'s2',title:'Chicken Biryani',desc:'Handi-style chicken biryani with raita',price:299,delivery:50,eta:'45-60 mins',img:'https://images.unsplash.com/photo-1604908177594-c4b1a0a0b3d3?auto=format&fit=crop&w=900&q=60',tags:['non-veg','rice'],createdAt:'2025-07-20'}
      ]
    }

    // App state
    let state = {
      selectedShop: null,
      search: '',
      sort: 'newest',
      selectedProduct: null
    }

    // Utility helpers
    const $ = (id)=>document.getElementById(id)

    function init(){
      renderShops();
      renderProducts();
      setupEvents();
    }

    function renderShops(){
      const list = $('shopsList');
      list.innerHTML = '';
      data.shops.forEach(s=>{
        const el = document.createElement('div');
        el.className = 'shop';
        el.dataset.id = s.id;
        el.innerHTML = ` <img src="https://avatars.dicebear.com/api/identicon/${s.name}.svg" alt="${s.name}" />
          <div style="flex:1">
            <div style="font-weight:600">${s.name}</div>
            <div class="muted-small">${s.city}</div>
          </div>`
        el.addEventListener('click',()=>{
          if(state.selectedShop === s.id) state.selectedShop = null;
          else state.selectedShop = s.id;
          renderShops(); renderProducts();
        })
        if(state.selectedShop === s.id) el.classList.add('active');
        list.appendChild(el);
      })
      $('shopCount').innerText = data.shops.length
    }

    function filterProducts(){
      let items = [...data.products];
      if(state.selectedShop) items = items.filter(p=>p.shopId===state.selectedShop);
      if(state.search){
        const q = state.search.toLowerCase();
        items = items.filter(p=> p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q) || (getShop(p.shopId).name.toLowerCase().includes(q)) )
      }
      if(state.sort === 'priceAsc') items.sort((a,b)=>a.price-b.price);
      else if(state.sort === 'priceDesc') items.sort((a,b)=>b.price-a.price);
      else items.sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
      return items;
    }

    function renderProducts(){
      const grid = $('productGrid');
      const items = filterProducts();
      grid.innerHTML = '';
      $('resultCount').innerText = `${items.length} products`;
      items.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.tabIndex = 0;
        card.innerHTML = `
          <img src="${p.img}" alt="${p.title}" />
          <div style="display:flex;justify-content:space-between;align-items:start">
            <div>
              <div class="title">${p.title}</div>
              <div class="muted-small">${getShop(p.shopId).name} • ${p.tags.join(', ')}</div>
            </div>
            <div style="text-align:right">
              <div style="font-weight:700">₹${p.price}</div>
              <div class="muted-small">${p.eta}</div>
            </div>
          </div>
        `
        card.addEventListener('click',()=>openDetails(p.id));
        grid.appendChild(card);
      })
    }

    function getShop(id){return data.shops.find(s=>s.id===id) || {name:'Unknown'} }

    function openDetails(productId){
      const p = data.products.find(x=>x.id===productId);
      if(!p) return;
      state.selectedProduct = p.id;
      const panel = $('detailsPanel');
      const content = $('detailsContent');
      content.innerHTML = `
        <div class="head">
          <img src="${p.img}" alt="${p.title}" />
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-size:18px;font-weight:700">${p.title}</div>
              <div class="badge">₹${p.price}</div>
            </div>
            <div class="muted-small" style="margin-top:6px">${getShop(p.shopId).name} — ${getShop(p.shopId).city}</div>
            <div style="margin-top:8px" class="muted">${p.desc}</div>
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
          <div class="pill">Delivery: ${p.delivery} ₹</div>
          <div class="pill">ETA: ${p.eta}</div>
          <div class="pill">Tags: ${p.tags.join(', ')}</div>
          <div class="pill">Added: ${p.createdAt}</div>
        </div>

        <div style="margin-top:14px;display:flex;gap:8px;align-items:center">
          <button class="btn" id="orderNow">Order Now</button>
          <button class="muted-small" id="addCart">Add to Cart</button>
          <div style="margin-left:auto" class="muted-small">Product ID: ${p.id}</div>
        </div>

        <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)" />
        <div class="muted-small">Shop Details</div>
        <div style="margin-top:8px">
          <div style="font-weight:700">${getShop(p.shopId).name}</div>
          <div class="muted-small">City: ${getShop(p.shopId).city}</div>
          <div class="muted-small">Contact: ${getShop(p.shopId).name.toLowerCase().replace(/\s/g,'')}@example.com</div>
        </div>
      `;
      panel.classList.add('open');
      panel.setAttribute('aria-hidden','false');

      // wire buttons
      setTimeout(()=>{
        $('orderNow').onclick = ()=>{ alert('Order placed for: '+p.title + ' — demo only') }
        $('addCart').onclick = ()=>{ alert('Added to cart: '+p.title + ' — demo only') }
      },50)
    }

    function closeDetails(){
      const panel = $('detailsPanel');
      panel.classList.remove('open');
      panel.setAttribute('aria-hidden','true');
      state.selectedProduct = null;
    }

    function setupEvents(){
      $('searchInput').addEventListener('input',(e)=>{ state.search = e.target.value; renderProducts(); });
      $('sortSelect').addEventListener('change',(e)=>{ state.sort = e.target.value; renderProducts(); });
      $('clearFilters').addEventListener('click',()=>{ state.selectedShop=null; state.search=''; $('searchInput').value=''; state.sort='newest'; $('sortSelect').value='newest'; renderShops(); renderProducts(); })
      $('closeDetails').addEventListener('click',closeDetails);
      document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeDetails(); })
    }

    // init app
    init();
  </script>
</body>
</html>
